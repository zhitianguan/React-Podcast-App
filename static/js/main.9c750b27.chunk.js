(this["webpackJsonppodcast-react-app"]=this["webpackJsonppodcast-react-app"]||[]).push([[0],{133:function(e,t,a){e.exports=a(191)},138:function(e,t,a){},140:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),o=a(230),l=(a(138),a(19)),s=a.n(l),u=a(42),m=a(17),p=(a(140),a(227)),d=a(228),f=a(232),g=a(229),h=a(236),b=a(197),E=a(226),v=a(220),y=a(112),x=a(218),S=a(221),j=a(222),O=a(223),k=a(224),C=function(e){var t=e.podcast,a=e.onPodcastSelect,n=Object(x.a)({root:{minHeight:"325px",width:"100%"},actionArea:{height:"100%"},media:{height:0,paddingTop:"70%",marginTop:"30"}})();return r.a.createElement(v.a,{item:!0,xs:12,sm:6,md:4,lg:3,className:n.root},r.a.createElement(S.a,null,r.a.createElement(j.a,{onClick:function(){return a(t)},className:n.actionArea},r.a.createElement(O.a,{className:n.media,image:t.artworkUrl600,title:t.collectionName}),r.a.createElement(k.a,null,r.a.createElement(b.a,{gutterBottom:!0,variant:"h5",component:"h2",noWrap:!0},t.collectionName),r.a.createElement(b.a,{variant:"body2",color:"textSecondary",component:"p"},"Genre: "+t.primaryGenreName)))))},T=function(e){var t=e.isSubscriptionList,a=e.podcasts,n=e.onPodcastSelect;if(void 0===a)return null;if(a.length<1)return r.a.createElement(v.a,{item:!0,justify:"center",container:!0},r.a.createElement(v.a,{item:!0},t?r.a.createElement(b.a,{variant:"h5",style:{marginTop:"80px",justifyContent:"center"}},"You have no current subscriptions"):r.a.createElement(b.a,{variant:"h5",style:{marginTop:"80px",marginBottom:"10px",justifyContent:"center"}},"Couldn't find a podcast with that name")));var c=a.map((function(e){return r.a.createElement(C,{onPodcastSelect:n,key:e.collectionId,podcast:e})}));return r.a.createElement(v.a,{container:!0,spacing:4},c)},N=a(116),w=a(117),I=a(123),P=a(122),B=a(118),A=a.n(B),U=function(e){Object(I.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({searchTerm:e})},n.handleSubmit=function(){var e=n.state.searchTerm;(0,n.props.onFormSubmit)(e)},n.state={searchTerm:""},n}return Object(w.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(A.a,{value:this.state.searchTerm,onChange:this.handleChange,onRequestSearch:this.handleSubmit,onCancelSearch:function(){e.setState({searchTerm:""})}})}}]),a}(r.a.Component),F=function(e){var t=e.podcasts,a=e.getPodcasts,n=e.handleOnSelectPodcast;return r.a.createElement(v.a,{item:!0,xs:10},r.a.createElement(v.a,{item:!0,container:!0,spacing:3,style:{justifyContent:"center"}},r.a.createElement(v.a,{item:!0,xs:8,style:{marginTop:"10px"}},r.a.createElement(U,{onFormSubmit:a})),void 0===t?r.a.createElement(v.a,{item:!0,style:{marginTop:"50px",justifyContent:"center"},container:!0},r.a.createElement(b.a,{variant:"h6"},"\u261d\ufe0f Type something and press enter to search for podcasts!")):r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(T,{podcasts:t,onPodcastSelect:n}))))},J=a(225),L=a(235),q=a(119),D=a.n(q),R=function(e){var t=e.track,a=e.onTrackSelect,n=Array.prototype.slice.call(t.getElementsByTagName("title")),c=Object(x.a)({media:{height:0,paddingTop:"70%",marginTop:"30"},playIcon:{verticalAlign:"middle",color:" #a93226",marginRight:"10px",marginBottom:"0"}})();return r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(S.a,null,r.a.createElement(j.a,{onClick:function(){return a(t)}},r.a.createElement(k.a,null,r.a.createElement(b.a,{variant:"h6",noWrap:!0},r.a.createElement(D.a,{className:c.playIcon}),n[0].childNodes[0].nodeValue)))))},G=function(e){e.podcast;var t=e.tracks,a=e.onTrackSelect;if(void 0===t)return null;t.length>75&&t.splice(75,t.length-75);var n=t.map((function(e){return r.a.createElement(R,{onTrackSelect:a,key:e,track:e})}));return r.a.createElement(v.a,{item:!0,container:!0,direction:"column",style:{maxWidth:"750px"},spacing:1},n)},M=function(e){var t=e.selectedPodcast,a=e.tracks,n=e.onClickTrack,c=e.toggleSubscription,i=e.subscribed,o=e.loggedIn,l=Object(x.a)({media:{width:"250px",height:"250px"}})();return void 0===t?r.a.createElement(v.a,{item:!0,style:{marginTop:"100px",justifyContent:"center"},container:!0},r.a.createElement(b.a,{variant:"h5"},"Search and select a podcast first!")):r.a.createElement(v.a,{item:!0,container:!0,xs:10,justify:"center",style:{marginTop:"10px"},spacing:3},r.a.createElement(v.a,{item:!0},r.a.createElement(S.a,null,r.a.createElement(O.a,{className:l.media,image:t.artworkUrl600,title:t.collectionName}))),r.a.createElement(v.a,{item:!0,container:!0,xs:4,justify:"center",direction:"column"},r.a.createElement(v.a,{item:!0},r.a.createElement(b.a,{variant:"h4"},t.collectionName)),r.a.createElement(v.a,{item:!0,style:{marginTop:"15px"}},r.a.createElement(b.a,{variant:"subtitle1"},"by ",t.artistName)),r.a.createElement(v.a,{item:!0},r.a.createElement(b.a,{variant:"subtitle1"},"Genre: ",t.primaryGenreName)),r.a.createElement(v.a,{item:!0},r.a.createElement(J.a,{control:r.a.createElement(L.a,{checked:i,disabled:!o,onChange:function(){c(!i,t)}}),label:"Subscribe",style:{marginTop:"15px"}}))),!o&&r.a.createElement(v.a,{item:!0,container:!0,xs:8,justify:"center"},r.a.createElement(b.a,{variant:"subtitle1"},"Sign in to enable podcast subscription feature!")),r.a.createElement(v.a,{item:!0,xs:12,style:{margin:"-10px"}}),r.a.createElement(v.a,{item:!0,style:{marginBottom:"100px"}},r.a.createElement(b.a,{variant:"h5",style:{marginBottom:"10px"}},"Episodes"),r.a.createElement(G,{tracks:a,onTrackSelect:n})))},W=function(e){var t=e.subscriptions,a=e.handleOnSelectPodcast,n=e.isSignedIn;return console.log(t),n?r.a.createElement(v.a,{item:!0,xs:10,style:{marginTop:"15px"}},r.a.createElement(T,{isSubscriptionList:!0,podcasts:t,onPodcastSelect:a})):r.a.createElement(v.a,{item:!0,justify:"center",container:!0},r.a.createElement(v.a,{item:!0},r.a.createElement(b.a,{variant:"h5",style:{marginTop:"80px",justifyContent:"center"}},"Please sign in to see your subscriptions")))},z=a(120),H=a.n(z),V=function(e){var t=e.selectedPodcast;return r.a.createElement(H.a,{style:{width:"65vw"},src:t,autoPlay:!0,controls:!0})},Y=a(234),Z=a(22),K=a(231),Q=a(121),X=a.n(Q).a.create({baseURL:"https://podcast-app.herokuapp.com"});X.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var $=function(e){return X.post("/user/signin",e)},_=function(e){return X.post("/user/signup",e)},ee=function(e){return X.get("/subscriptions",{params:{email:e}})},te=function(e,t){return X.patch("/subscriptions",{email:e,subscriptions:t})},ae=Object(x.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:e.spacing(2),"& .MuiTextField-root":{margin:e.spacing(1),width:"300px"},"& .MuiButtonBase-root":{margin:e.spacing(2),textTransform:"none"}}}})),ne={firstName:"",lastName:"",email:"",password:""},re=function(e){var t=e.handleClose,a=e.setUser,c=ae(),i=Object(n.useState)(ne),o=Object(m.a)(i,2),l=o[0],p=o[1],d=Object(n.useState)(!0),f=Object(m.a)(d,2),g=f[0],h=f[1],v=function(){var e=Object(u.a)(s.a.mark((function e(n){var r,c,i,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!g){e.next=9;break}return e.next=4,_(l);case 4:c=e.sent,i=c.data,localStorage.setItem("profile",JSON.stringify(Object(Z.a)({},i))),e.next=14;break;case 9:return e.next=11,$(l);case 11:o=e.sent,u=o.data,localStorage.setItem("profile",JSON.stringify(Object(Z.a)({},u)));case 14:a(null===(r=JSON.parse(localStorage.getItem("profile")))||void 0===r?void 0:r.userData),t();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{className:c.root,onSubmit:v},r.a.createElement(b.a,{component:"h1",variant:"h5"},g?"Sign up":"Sign in"),g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{label:"First Name",variant:"filled",required:!0,value:l.firstName,onChange:function(e){return p(Object(Z.a)(Object(Z.a)({},l),{},{firstName:e.target.value}))}}),r.a.createElement(K.a,{label:"Last Name",variant:"filled",required:!0,value:l.lastName,onChange:function(e){return p(Object(Z.a)(Object(Z.a)({},l),{},{lastName:e.target.value}))}})),r.a.createElement(K.a,{label:"Email",variant:"filled",type:"email",required:!0,value:l.email,onChange:function(e){return p(Object(Z.a)(Object(Z.a)({},l),{},{email:e.target.value}))}}),r.a.createElement(K.a,{label:"Password",variant:"filled",type:"password",required:!0,value:l.password,onChange:function(e){return p(Object(Z.a)(Object(Z.a)({},l),{},{password:e.target.value}))}}),r.a.createElement("div",null,r.a.createElement(E.a,{variant:"contained",onClick:t},"Cancel"),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary"},g?"Sign Up":"Sign In")),r.a.createElement(E.a,{onClick:function(){p(ne),h((function(e){return!e}))}},g?"Already have an account? Sign in":"Don't have an account? Sign Up"))},ce=function(e){var t=e.open,a=e.handleClose,n=e.setUser;return r.a.createElement(Y.a,{open:t,onClose:a},r.a.createElement(re,{handleClose:a,setUser:n}))},ie=function(){var e,t=Object(n.useState)(0),a=Object(m.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(void 0),l=Object(m.a)(o,2),x=l[0],S=l[1],j=Object(n.useState)(void 0),O=Object(m.a)(j,2),k=O[0],C=O[1],T=Object(n.useState)([]),N=Object(m.a)(T,2),w=N[0],I=N[1],P=Object(n.useState)(void 0),B=Object(m.a)(P,2),A=B[0],U=B[1],J=Object(n.useState)(!1),L=Object(m.a)(J,2),q=L[0],D=L[1],R=Object(n.useState)(null===(e=JSON.parse(localStorage.getItem("profile")))||void 0===e?void 0:e.userData),G=Object(m.a)(R,2),z=G[0],H=G[1],Y=Object(n.useState)([]),Z=Object(m.a)(Y,2),K=Z[0],Q=Z[1],X=Object(n.useState)(!!k&&-1!==K.findIndex((function(e){return e.collectionId===k.collectionId}))),$=Object(m.a)(X,2),_=$[0],ae=$[1];Object(n.useEffect)((function(){ae(!!k&&-1!==K.findIndex((function(e){return e.collectionId===k.collectionId})))}),[k,K]),Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z){e.next=8;break}return e.next=3,ee(z.email);case 3:t=e.sent,a=t.data,Q(a),e.next=9;break;case 8:Q([]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[z]);var ne=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=t.toString().replace(/[^a-zA-Z0-9]/g," "),a="https://cors.bridged.cc/https://itunes.apple.com/search?term=".concat(t,"&entity=podcast"),"https://cors-anywhere.herokuapp.com/",e.next=6,fetch(a,{mode:"cors",headers:{"x-cors-grida-api-key":"32832479-b3b1-4f24-aa44-4ab02ccb1eb7"}});case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,S(r.results),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,r,c,o,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.trackId,"https://cors-anywhere.herokuapp.com/",e.prev=2,e.next=5,fetch("https://cors.bridged.cc/https://itunes.apple.com/lookup?id=".concat(a,"&entity=podcast"),{mode:"cors",headers:{"x-cors-grida-api-key":"32832479-b3b1-4f24-aa44-4ab02ccb1eb7"}});case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.next=11,fetch(r.results[0].feedUrl);case 11:return c=e.sent,e.next=14,c.text();case 14:o=e.sent,l=(new y.DOMParser).parseFromString(o,"text/xml"),u=l.getElementsByTagName("item"),C(t),I(Array.from(u)),i(1),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(u.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=K,t?-1===K.findIndex((function(e){return e.collectionId===a.collectionId}))&&n.push(a):n=n.filter((function(e){return e.collectionId!==a.collectionId})),e.next=4,te(z.email,n);case 4:Q(n),ae(t);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{position:"sticky"},r.a.createElement(d.a,null,r.a.createElement(f.a,{value:c,onChange:function(e,t){i(t)}},r.a.createElement(g.a,{label:"Search Podcast"}),r.a.createElement(g.a,{label:"Episodes"}),r.a.createElement(g.a,{label:"Subscriptions"})),z?r.a.createElement("div",{style:{display:"flex",marginLeft:"auto"}},r.a.createElement(h.a,{style:{marginRight:"15px"},alt:null===z||void 0===z?void 0:z.name},null===z||void 0===z?void 0:z.name.charAt(0)),r.a.createElement(b.a,{style:{marginRight:"15px"},variant:"h6"},null===z||void 0===z?void 0:z.name),r.a.createElement(E.a,{variant:"contained",color:"secondary",onClick:function(){H(null),localStorage.clear()}},"Logout")):r.a.createElement(E.a,{style:{marginLeft:"auto"},variant:"contained",color:"secondary",onClick:function(){D(!0)}},"Sign up"))),r.a.createElement(ce,{open:q,handleClose:function(){D(!1)},setUser:H}),r.a.createElement(v.a,{style:{justifyContent:"center"},container:!0,spacing:0},0===c&&r.a.createElement(F,{podcasts:x,getPodcasts:ne,handleOnSelectPodcast:re}),1===c&&r.a.createElement(M,{subscribed:_,selectedPodcast:k,tracks:w,onClickTrack:function(e){U(e.getElementsByTagName("enclosure")[0].getAttribute("url"))},toggleSubscription:ie,loggedIn:!!z}),2===c&&r.a.createElement(W,{subscriptions:K,handleOnSelectPodcast:re,isSignedIn:!!z})),r.a.createElement("div",{style:{position:"fixed",bottom:"0",width:"100%",textAlign:"center"}},r.a.createElement(V,{selectedPodcast:A})))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null),r.a.createElement(ie,null)),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.9c750b27.chunk.js.map